!function(e){function t(t){for(var r,c,i=t[0],s=t[1],u=t[2],f=0,m=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);m.length;)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={23:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://otus.ru/static/";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;o.push([25,1,0,52]),n()}({"/kyj":function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),c=n.n(o),i=["default","success","error","warning"],s=function(){function e(){var t=this;a()(this,e),this.fixPosition=function(){t.container.offsetTop+t.container.offsetHeight>window.innerHeight+document.documentElement.scrollTop?t.elem.style.position="fixed":t.elem.style.position="absolute"},this.close=function(){t.elem.style.opacity="0",setTimeout((function(){t.elem.parentNode===document.body&&t.container.removeChild(t.elem)}),500),window.removeEventListener("scroll",t.fixPosition)}}return c()(e,[{key:"show",value:function(e){var t=e.type,n=e.text,r=e.timeout,a=e.className,o=e.container;-1===i.indexOf(t)&&(t="default"),this.container=o||document.body,this.elem=document.createElement("div"),this.elem.className="notification-lib notification-lib_".concat(t," ").concat(a),this.elem.innerHTML=n,this.closeElem=document.createElement("div"),this.closeElem.className="notification-lib__close ic ic-close-bold",this.elem.appendChild(this.closeElem),this.closeElem.addEventListener("click",this.close),window.addEventListener("scroll",this.fixPosition),this.container.appendChild(this.elem),this.fixPosition(),r&&setTimeout(this.close,r)}},{key:"success",value:function(e){this.show(Object.assign(e,{type:"success"}))}},{key:"error",value:function(e){this.show(Object.assign(e,{type:"error"}))}},{key:"warning",value:function(e){this.show(Object.assign(e,{type:"warning"}))}}],[{key:"create",value:function(){return new e}}]),e}();t.a={success:function(){var e;return(e=s.create()).success.apply(e,arguments)},error:function(){var e;return(e=s.create()).error.apply(e,arguments)},warning:function(){var e;return(e=s.create()).warning.apply(e,arguments)},show:function(){var e;return(e=s.create()).show.apply(e,arguments)}}},25:function(e,t,n){n("j36g"),e.exports=n("9G/J")},"3HKk":function(e,t,n){"use strict";t.a={CommonLabel:"Обычный",HWCommonLabel:"Обычное Д/З",ModuleCommonLabel:"Обычный модуль",CommonValue:"common",ProjectLabel:"Проектная работа",HWProjectLabel:"Проектная работа",ModuleProjectLabel:"Проектная работа",ProjectValue:"project"}},"9G/J":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"homework",(function(){return xe}));var a,o=n("bNQv"),c=n.n(o),i=n("i8i4"),s=n.n(i),u=n("q1tI"),l=n.n(u),f=n("55Ip"),m=n("Ty5D"),d=n("eIui"),h=n("Sj7Q"),p=(n("XmJA"),n("Z4rv")),v=n("o0o1"),y=n.n(v),g=n("yXPU"),w=n.n(g),_=n("yG8O"),b=n.n(_),k=n("lwsE"),E=n.n(k),x=n("W8MJ"),C=n.n(x),N=n("PJYZ"),R=n.n(N),O=n("7W2i"),P=n.n(O),j=n("a1gu"),S=n.n(j),T=n("Nsbk"),M=n.n(T),I=n("U+yc"),A=n.n(I),B=(n("1ABj"),n("17x9")),z=n.n(B),L=n("2vnA"),W=n("/kyj"),U=n("3HKk"),D=n("Pg+I"),J=n("YtzK"),K=n("lSNA"),F=n.n(K),H=n("3WF5"),q=n.n(H),Q=n("TSYQ"),G=n.n(Q),Y=n("l1BO"),V=n("9mWb");function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S()(this,n)}}var X,$,ee,te,ne,re,ae,oe,ce,ie,se,ue=Object(V.a)({withRouter:!0})(a=function(e){P()(r,e);var t,n=Z(r);function r(){var e;return E()(this,r),(e=n.call(this)).handleClick=function(t){var n=e.state.items;"true"!==t.currentTarget.getAttribute("data-available")&&t.preventDefault(),e.setState({items:q()(n,(function(e){return String(e.id)===t.currentTarget.getAttribute("data-id")&&(e.execution=e.execution||{},e.execution.unread=!1),e}))})},e.state={loading:!1,items:[]},e}return C()(r,[{key:"componentDidMount",value:(t=w()(y.a.mark((function e(){var t,n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.userCourseId,this.setState({loading:!0}),e.next=4,Object(Y.b)("/learning/homeworks/".concat(t,"/"),"GET");case 4:n=e.sent,r=n.response,a=n.error,this.setState({loading:!1}),a||this.setState({items:r.data});case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.items,a=this.props.homeworkId,o={new:"ic-fire",check_request:"ic-clock-black",check:"ic-clock-black",revoke:"ic-fire",accept:"ic-test-ok "};return l.a.createElement("div",{className:"student-homeworks"},n&&l.a.createElement("div",{className:"loader loader_md loader_absolute-center ic ic-loader"}),!n&&q()(r,(function(t,n){var r,c=t.execution||{};return t.in_future&&"new"===c.status||(r=o[c.status||(t.in_future?"":"new")]),l.a.createElement(f.c,{to:"/homework-chat/".concat(t.id,"/"),key:n,onClick:e.handleClick,"data-id":t.id,"data-available":t.available,className:G()({"student-homeworks__item":!0,"student-homeworks__item_active":String(t.id)===a,"student-homeworks__item_disabled":!t.available})},c.unread&&l.a.createElement("div",{className:"student-homeworks__unread-box"},l.a.createElement("div",{className:"student-homeworks__unread"})),l.a.createElement("div",{className:"student-homeworks__title"},n+1,". ",t.title),"accept"===c.status&&c.hasOwnProperty("points")&&l.a.createElement("div",{className:"student-homeworks__points"},c.points),r&&l.a.createElement("div",{className:"student-homeworks__ic-box"},l.a.createElement("div",{className:G()("ic","student-homeworks__ic",F()({},r,!0))})))})))}}]),r}(l.a.Component))||a;function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S()(this,n)}}var fe,me,de,he,pe,ve,ye,ge,we,_e=Object(V.a)({withRouter:!0})((se=function(e){P()(n,e);var t=le(n);function n(){var e;return E()(this,n),e=t.call(this),b()(e,"chatLoading",ee,R()(e)),b()(e,"chat",te,R()(e)),b()(e,"execution",ne,R()(e)),b()(e,"homework",re,R()(e)),b()(e,"disabled",ae,R()(e)),b()(e,"check",oe,R()(e)),b()(e,"course",ce,R()(e)),b()(e,"userCourse",ie,R()(e)),e.fetcher=w()(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetcherTimeout&&clearTimeout(e.fetcherTimeout),t.next=3,e.updateChat();case 3:e.mount&&(e.fetcherTimeout=setTimeout(e.fetcher,1e4));case 4:case"end":return t.stop()}}),t)}))),e.handlePaymentMetrics=function(){var e=window.location.href.split("?");if(e.length>1){var t=e[0],n=e[1],r=new URLSearchParams("?"+n);r.has("from_payment")&&(r.delete("from_payment"),window.history.replaceState({},document.title,t+"?"+r.toString()),metrics.push({type:"ya",method:"reachGoal",goal:"payment-ok_homework"}),metrics.push({type:"ga",args:["send","event","Payment","homework"]}))}},e.updateChat=function(){var t=e.props.match.params.id;return e.fetcherPromise&&e.fetcherPromise.cancel(),e.fetcherPromise=Object(Y.b)("/learning/homework/".concat(t,"/"),"GET").then((function(t){var n=t.response,r=t.error;Object(L.n)((function(){e.chatLoading=!1,e.fetcherPromise=null,r||(e.chat=n.data.messages||[],e.execution=n.data.execution||{},e.homework=n.data.homework||{},e.check=n.data.check||{},e.course=n.data.course||{},e.userCourse=n.data.user_course||{},e.availableCommands=n.data.available_commands||{},e.disabled=!1)}))})),e.fetcherPromise},e.handleClose=function(){e.props.history.push("/")},e.handleSendMessage=function(){var t=w()(y.a.mark((function t(n,r,a){var o,c,i,s,u=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=u.length>3&&void 0!==u[3]&&u[3],c=e.props.match,i=c.params.id,e.disabled=!0,t.next=6,Object(Y.b)("/learning/homework/".concat(i,"/"),"POST",{msg:n,editMsg:o});case 6:return s=t.sent,s.error&&W.a.error({text:"При редактировании сообщения произошла ошибка",timeout:2e3}),t.next=11,e.updateChat();case 11:e.disabled=!1,r.value="",r.focus();case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.handleFileUpload=function(){var t=w()(y.a.mark((function t(n,r){var a,o,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match,o=a.params.id,c=(c=r.value).trim(),e.disabled=!0,t.next=7,Object(Y.b)("/learning/homework/".concat(o,"/"),"POST",{msg:c,media:n});case 7:return t.next=9,e.updateChat();case 9:e.disabled=!1,r.value="",r.focus();case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.mount=!0,e.fetcherTimeout=null,e.fetcherPromise=null,e}return C()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.id;e.match.params.id!==t&&(this.chatLoading=!0,this.fetcher())}},{key:"componentWillMount",value:function(){this.chatLoading=!0,this.fetcher(),this.handlePaymentMetrics()}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.fetcherTimeout&&clearTimeout(this.fetcherTimeout)}},{key:"render",value:function(){var e,t=this.extra.userCourseId,n=this.chatLoading,r=this.execution,a=this.homework,o=this.chat,c=this.disabled,i=this.check,s=this.course,u=this.userCourse,f=this.availableCommands,m=(r||{}).status,d=a||{},h=d.title,p=d.type,v=d.project_themes,y=this.props.match.params.id;return e=p===U.a.CommonValue?h?"ДЗ: ".concat(h):"ДЗ":"Проектная работа",l.a.createElement(J.a,{bodyPreventOverflow:!0,className:{"learning-near__hw-modal":!0},onCloseClick:this.handleClose},l.a.createElement("div",{className:"learning-near__hw-app"},l.a.createElement("div",{className:"container container_full container_full-force container-overflow-auto"},l.a.createElement("div",{className:"container__row container__row_gutter-0"},l.a.createElement("div",{className:"container__col container__col_3 container__col_sm-0"},l.a.createElement(ue,{homeworkId:y,userCourseId:t})),l.a.createElement("div",{className:"container__col container__col_9 container__col_sm-12"},l.a.createElement("div",{className:"homework__modal-table"},!n&&l.a.createElement("div",{className:"homework__modal-content-header"},l.a.createElement("div",{className:G()({"homework__modal-info":!0,"homework__modal-info_green":-1!==["accept"].indexOf(m),"homework__modal-info_orange":-1!==["check_request"].indexOf(m),"homework__modal-info_blue":-1!==["check"].indexOf(m),"homework__modal-info_red":-1!==["revoke"].indexOf(m)})},l.a.createElement("h2",{className:"text text_default"},e),r&&r.project_theme&&l.a.createElement("h2",{className:"text text_default"},"Тема: ",r.project_theme," (",r.project_theme_status,")"))),l.a.createElement("div",{className:"homework__modal-content-row"},l.a.createElement("div",{className:"homework__modal-content-box"},l.a.createElement("div",{className:"homework__modal-content"},l.a.createElement("div",{className:"homework__modal-chat"},n&&l.a.createElement("div",{className:"loader loader_md loader_absolute-center ic ic-loader"}),!n&&l.a.createElement(D.a,{disabled:c,onSendMessage:this.handleSendMessage,onFileUpload:this.handleFileUpload,chat:o,check:i,course:s,userCourse:u,project_themes:v,availableCommands:f})))))))))))}}]),n}(l.a.Component),se.contextTypes={userCourseId:z.a.number},$=se,ee=A()($.prototype,"chatLoading",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),te=A()($.prototype,"chat",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=A()($.prototype,"execution",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=A()($.prototype,"homework",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=A()($.prototype,"disabled",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oe=A()($.prototype,"check",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=A()($.prototype,"course",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=A()($.prototype,"userCourse",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=$))||X;function be(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S()(this,n)}}var xe=(fe=function(e){P()(n,e);var t=Ee(n);function n(){var e;E()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(e,"_groups",me,R()(e)),b()(e,"currentTeacherId",de,R()(e)),b()(e,"currentGroupId",he,R()(e)),b()(e,"assigneeId",pe,R()(e)),b()(e,"users",ve,R()(e)),b()(e,"homeworks",ye,R()(e)),b()(e,"executions",ge,R()(e)),b()(e,"_assignee",we,R()(e)),e}return C()(n,[{key:"groups",get:function(){return this._groups},set:function(e){this._groups=e,this._groups.length>0&&null===this.currentGroupId&&(this.currentGroupId=this._groups[0].id)}},{key:"assignee",get:function(){return this._assignee},set:function(e){this._assignee=[{value:null,title:"Все"}].concat(e.map((function(e){return{value:e.id,title:e.fullname}})))}},{key:"setExecutions",value:function(e){var t,n={},r=be(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.user_id]=n[a.user_id]||{},n[a.user_id][a.homework_id]=Object.assign({},a)}}catch(e){r.e(e)}finally{r.f()}this.executions=n,this.assigneeId=null}}]),n}(n("pOpv").a),me=A()(fe.prototype,"_groups",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),de=A()(fe.prototype,"currentTeacherId",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=A()(fe.prototype,"currentGroupId",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=A()(fe.prototype,"assigneeId",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=A()(fe.prototype,"users",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=A()(fe.prototype,"homeworks",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ge=A()(fe.prototype,"executions",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),we=A()(fe.prototype,"_assignee",[L.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A()(fe.prototype,"groups",[L.f],Object.getOwnPropertyDescriptor(fe.prototype,"groups"),fe.prototype),A()(fe.prototype,"assignee",[L.f],Object.getOwnPropertyDescriptor(fe.prototype,"assignee"),fe.prototype),fe);window.React.Apps=window.React.Apps||{},window.React.Apps.studentHomework=function(e){var t,n=new d.a({context:{userCourseId:parseInt(e.getAttribute("data-user-course-id"))},stores:r,plugins:p});s.a.render((t=n.componentContext,l.a.createElement(h.a,{app:t},l.a.createElement(f.b,null,l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/homework-chat/:id/",component:_e}))))),e)},window.React.StopApps=window.React.StopApps||{},c()(window.React.Apps,(function(e,t){var n,r=document.getElementById(t);r&&(e(r),window.React.StopApps[t]=(n=r,function(){s.a.unmountComponentAtNode(n)}))}))},"9mWb":function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n("W8MJ"),a=n.n(r),o=n("lwsE"),c=n.n(o),i=n("7W2i"),s=n.n(i),u=n("a1gu"),l=n.n(u),f=n("Nsbk"),m=n.n(f),d=n("MVZn"),h=n.n(d),p=n("JIMn"),v=n.n(p),y=n("la6v"),g=n.n(y),w=n("mwIZ"),_=n.n(w),b=n("17x9"),k=n.n(b),E=n("kMSe"),x=n("Ty5D");function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var N={isObserver:!0,styles:null,withRouter:!1};function R(e,t){var n;return"function"==typeof e?O(e,n=P(t)):(n=P(e),v()(O,n))}function O(e,t){var n=e;return n.contextTypes=h()({},e.contextTypes,{router:k.a.object,app:k.a.object}),n.prototype&&"function"==typeof n.prototype.render&&(g()(n.prototype,{callAction:function(){var e;return(e=this.app).callAction.apply(e,arguments)}}),Object.defineProperties(n.prototype,{app:{get:function(){return this.context.app}},extra:{get:function(){return this.app.extra}},stores:{get:function(){return this.app.stores}},logger:{get:function(){return this.app.logger}}}),t.linkStore&&(n=function(e){s()(r,e);var n=C(r);function r(e,a){var o;c()(this,r);for(var i=arguments.length,s=new Array(i>2?i-2:0),u=2;u<i;u++)s[u-2]=arguments[u];return(o=n.call.apply(n,[this,e,a].concat(s))).store=_()(a.app.stores,t.linkStore),o}return a()(r)}(n))),t.isObserver&&(n=Object(E.a)(n)),t.withRouter&&(n=Object(x.e)(n)),n}function P(e){return g()({},e,N)}},HRdk:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),c=n.n(o),i=n("7W2i"),s=n.n(i),u=n("a1gu"),l=n.n(u),f=n("Nsbk"),m=n.n(f),d=n("q1tI"),h=n.n(d),p=n("TSYQ"),v=n.n(p);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var g=function(e){s()(n,e);var t=y(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.progress,n=e.center,r=e.animated,a=e.showProgress;return t=(t=(t=t||0)<0?0:t)>100?100:t,h.a.createElement("div",{className:v()({"otus-progress":!0,"otus-progress_absolute-center":n})},h.a.createElement("div",{className:v()({"otus-progress__inner":!0,"otus-progress__inner_animated":r}),style:{width:"".concat(t,"%")}},h.a.createElement("div",{className:"otus-progress__label otus-progress__label_inner",style:{width:"".concat(100/t*100,"%")}},a&&"".concat(t,"%"))),a&&h.a.createElement("label",{className:"otus-progress__label"},t,"%"))}}]),n}(h.a.Component);g.defaultProps={showProgress:!0,animated:!1}},"Pg+I":function(e,t,n){"use strict";n.d(t,"a",(function(){return ne}));var r=n("o0o1"),a=n.n(r),o=n("yXPU"),c=n.n(o),i=n("lwsE"),s=n.n(i),u=n("W8MJ"),l=n.n(u),f=n("7W2i"),m=n.n(f),d=n("a1gu"),h=n.n(d),p=n("Nsbk"),v=n.n(p),y=n("q1tI"),g=n.n(y),w=n("17x9"),_=n.n(w),b=n("TSYQ"),k=n.n(b),E=n("wd/R"),x=n.n(E),C=n("igiR"),N=n("Ty5D"),R=n("bNQv"),O=n.n(R),P=n("3WF5"),j=n.n(P),S=n("mV8o"),T=n("QIFU"),M=n("jyKj");function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var A=function(e){m()(n,e);var t=I(n);function n(){return s()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.links,r=t;return(void 0===n||n)&&(r=Object(M.b)(r,{linkProcessor:function(e){return"/redirect/?to=".concat(encodeURIComponent(e.replace(/&amp;/g,"&")))}})),r=Object(M.j)(r,"```",(function(e){return'<code class="red code mono">'.concat(e.trim(),"</code>")})),g.a.createElement("div",{className:"homework-chat__item-text",dangerouslySetInnerHTML:{__html:r}})}}]),n}(g.a.Component),B=A,z=n("lSNA"),L=n.n(z);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var U=function(e){m()(n,e);var t=W(n);function n(){return s()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props.media,t=Object(M.a)(e.attrs.size);return g.a.createElement("a",{href:e.media.link,target:"_blank",className:"homework-chat-media"},g.a.createElement("div",{className:k()(L()({"homework-chat-media__icon":!0,ic:!0},"ic-media-".concat(e.media.icon||"file"),!0))}),g.a.createElement("div",{className:"homework-chat-media__text"},g.a.createElement("div",{className:"homework-chat-media__title"},e.attrs.name),g.a.createElement("div",{className:"homework-chat-media__size"},t.value," ",t.suffix)))}}]),n}(g.a.Component);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var J=function(e){m()(n,e);var t=D(n);function n(){return s()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props.url,t={};return e&&(t.backgroundImage="url(".concat(e,")")),g.a.createElement("div",{className:"homework-chat__item-avatar"},g.a.createElement("div",{className:"ic-owl-avatar homework-chat__item-avatar-img",style:t}))}}]),n}(g.a.Component);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var F=function(e){m()(n,e);var t=K(n);function n(){return s()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.change,r=t.actor,a=Object(M.f)(r.fname,r.lname),o="";switch(n.field){case"assignee_id":o="".concat(Object(M.c)("назначил",r.gender)," проверяющего");break;case"points":o="".concat(Object(M.c)("выставил",r.gender)," оценку ").concat(n.to);break;case"status":switch(n.to){case"new":o="".concat(Object(M.c)("перевел",r.gender)," ДЗ в статус «Новое»");break;case"accept":o="".concat(Object(M.c)("принял",r.gender)," ДЗ");break;case"revoke":o="".concat(Object(M.c)("вернул",r.gender)," ДЗ на доработку");break;case"check_request":case"check":o="".concat(Object(M.c)("взял",r.gender)," ДЗ на проверку")}break;case"project_theme_status":switch(n.to){case"accept":o="".concat(Object(M.c)("принял",r.gender)," тему работы");break;case"revoke":o="".concat(Object(M.c)("отклонил",r.gender)," тему работы")}break;default:o="изменил поле ".concat(n.field," с ").concat(n.from," на ").concat(n.to)}return o?g.a.createElement("div",{className:k()({"homework-chat__item":!0,"homework-chat__item_other":t.current_user.id!==t.actor.id})},g.a.createElement("div",{className:"homework-chat__item-content homework-chat__item-content_inline"},t.date_format," ",g.a.createElement("span",{className:"homework-chat__actor"},a)," ",o," ",g.a.createElement("br",null))):null}}]),n}(g.a.Component),H=n("YtzK"),q=n("pH2+");function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var G=function(e){m()(n,e);var t=Q(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(t){var n=e.props.onCommandClick;"function"==typeof n&&n(t,e.props.command)},e}return l()(n,[{key:"render",value:function(){var e=this.props.command,t=e.dsc,n=e.help_text;return g.a.createElement("div",{className:"homework-chat__command-button",onClick:this.handleClick},g.a.createElement("div",{className:"homework-chat__command-dsc"},t),g.a.createElement("div",{className:"homework-chat__command-help"},n))}}]),n}(g.a.Component);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var V,Z,X=function(e){m()(n,e);var t=Y(n);function n(){return s()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.availableCommands,n=e.onCommandClick;return g.a.createElement("div",{className:"homework-chat__command-list"},j()(t,(function(e,t){return g.a.createElement(G,{command:e,key:t,onCommandClick:n})})))}}]),n}(g.a.Component),$=n("x2Tk"),ee=n("/kyj");function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var ne=Object(N.e)((Z=function(e){m()(n,e);var t=te(n);function n(){var e;return s()(this,n),(e=t.call(this)).handleUnread=function(){var t=e.props.onUnread;"function"==typeof t&&t.apply(void 0,arguments)},e.handleSend=function(){var t=c()(a.a.mark((function t(n){var r,o,c,i,s,u,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,o=r.onSendMessage,c=r.disabled,i=e.state,s=i.fileProgress,u=i.editing,l=(l=e.input.value).trim(),!c&&!1===s){t.next=6;break}return t.abrupt("return");case 6:if(""===l||"function"!=typeof o){t.next=9;break}return t.next=9,o(l,e.input,n,u&&u.id);case 9:e.setState({editing:null}),e.input.focus();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleKeyDown=function(){var t=c()(a.a.mark((function t(n){var r,o,c,i,s,u,l,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("keydown"!==n.type){t.next=8;break}if(!n.metaKey&&!n.ctrlKey||"Enter"!==n.key){t.next=7;break}return n.preventDefault(),t.next=5,e.handleSend(n);case 5:t.next=8;break;case 7:if("Tab"===n.key){for(n.preventDefault(),r=n.target.selectionStart,o=n.target.selectionEnd,c=n.target.value,i=[],s=0,u=0;u<n.target.value.length;u+=1)r<=u&&u<=o&&-1===i.indexOf(s)&&i.push(s),"\n"===c[u]&&(s+=1);n.shiftKey?(l=0,0,n.target.value=j()(n.target.value.split("\n"),(function(e,t){var n=e;return-1!==i.indexOf(t)&&("\t"===e[0]?(n=e.substring(1),l+=1):"    "===e.substring(0,4)&&(n=e.substring(4),l+=4)),e.length,n})).join("\n"),r!==o?(n.target.selectionStart=r,n.target.selectionEnd=o-l):n.target.selectionStart=n.target.selectionEnd=r-l):r!==o?(0,f=0,n.target.value=j()(n.target.value.split("\n"),(function(e,t){var n=e;return-1!==i.indexOf(t)&&(n="\t".concat(n),f+=1),e.length,n})).join("\n"),n.target.selectionStart=r+1,n.target.selectionEnd=o+f):(n.target.value=n.target.value.substring(0,r)+"\t"+n.target.value.substring(o),n.target.selectionStart=n.target.selectionEnd=r+1)}case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleScroll=function(){e.sticky=Boolean(e.items.clientHeight===e.items.scrollHeight-e.items.scrollTop)},e.refItems=function(t){var n=e.sticky;e.items||(e.items=t),e.items&&n&&(e.items.scrollTop=e.items.scrollHeight)},e.handleChange=function(t){var n=e.props.onMessageChange;"function"==typeof n&&n(t)},e.handleEdit=function(t){var n=e.props.chat,r=+t.target.getAttribute("data-id"),a=n.find((function(e){return e.id===r}));e.input.value=a.raw_msg;var o=document.createEvent("Event");o.initEvent("autosize:update",!0,!1),e.input.dispatchEvent(o),e.setState({editing:a})},e.handleCancelEdit=function(t){e.input.value="",e.setState({editing:null})},e.handleFileChoose=function(){var t=c()(a.a.mark((function t(n){var r,o,c,i,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.onFileUpload,o=n.target.files[0],c=3221225472,!(o.size>c)){t.next=7;break}return i=Object(M.a)(c),ee.a.error({text:"Превышен допустимый размер для загрузки файлов (".concat(i.value," ").concat(i.suffix,")"),timeout:2e3}),t.abrupt("return");case 7:return e.ajaxPromise=Object($.a)(o,{fileName:o.name,mediaType:"file"},{onUploadProgress:function(t){var n=Math.round(t.loaded/t.total*100);e.setState({fileProgress:n})}}),n.target.value="",t.prev=9,e.setState({fileProgress:0}),t.next=13,e.ajaxPromise;case 13:s=t.sent,"function"==typeof r&&r(s,e.input),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(9),ee.a.error({text:"Что-то пошло не так. Попробуйте еще раз",timeout:2e3}),e.ajaxPromise=null;case 21:return t.prev=21,e.setState({fileProgress:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[9,17,21,24]])})));return function(e){return t.apply(this,arguments)}}(),e.handleCommandClick=function(){var t=c()(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),e.input.value=r.command+(r.autosubmit?"":" "),e.input.focus(),!r.autosubmit){t.next=6;break}return t.next=6,e.handleSend(n);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.input=null,e.ajaxPromise=null,e.state={sticky:!0,fileProgress:!1,editing:null},e.sticky=!0,e}return l()(n,[{key:"componentDidUpdate",value:function(){this.refItems()}},{key:"render",value:function(){var e=this,t=this.props,n=t.chat,r=t.check,a=t.course,o=t.match,c=t.userCourse,i=t.project_themes,s=t.availableCommands,u=t.isEnableCanEditLastChangedStatus,l=this.state.editing,f=r||{},m=f.group_finished,d=void 0!==m&&m,h=f.hw_check_enable,p=void 0!==h&&h,v=f.hw_check_price,y=f.shift_last_date,w=f.invoice_entity,_=(a||{}).title,b=this.state,E=b.fileProgress,N=b.payModal,R=[],P=this.props.disabled||!1!==E,j=o.params.id,I=c||{},A=I.check_enabled,z=(I.last_date,I.is_steps);if(i&&R.push(g.a.createElement(q.a,{title:"Темы для проекта",msg:i})),Array.isArray(n)){var L=null;n.slice().reverse().some((function(e){return!(!e.changes||!e.changes.some((function(e){return"status"===e.field})))&&(L=e.date,!0)})),O()(n,(function(t,n){if(t.el)R.push(g.a.createElement("div",{key:n},t.el));else{if(t.changes&&t.changes.length>0&&O()(t.changes,(function(e,r){R.push(g.a.createElement(F,{key:"".concat(n,"-").concat(r),item:t,change:e}))})),!(t.msg||t.media&&0!==t.media.length))return;R.push(function(t){var r=t.actor,a=!r,o=r?r.photo:null,c=r?Object(M.f)(r.fname,r.lname):"OTUS",i=t.current_user&&t.actor&&t.current_user.id!==t.actor.id,s=t.current_user&&t.actor&&t.current_user.id===t.actor.id;return g.a.createElement("div",{key:"".concat(n),className:k()({"homework-chat__item":!0,"homework-chat__item_other":i})},g.a.createElement("div",{className:"homework-chat__item-content"},g.a.createElement(J,{url:o}),g.a.createElement("div",{className:"homework-chat__item-content-box"},g.a.createElement("div",{className:"homework-chat__actor"},c,g.a.createElement("div",{className:"homework-chat__item-date"},t.date_format,t.edited&&" (ред.)")),a&&t.raw_msg&&g.a.createElement(B,{msg:t.raw_msg,links:!1}),!a&&t.msg&&g.a.createElement(B,{msg:t.msg}),t.media&&t.media.map((function(e,t){return g.a.createElement(U,{key:t,media:e})})),i&&t.was_readed&&g.a.createElement("div",{className:"homework-chat__item-bottom"},g.a.createElement("div",{className:"homework-chat__item-unread","data-id":t.id,onClick:e.handleUnread},"Пометить непрочитанным")),s&&(!L||t.date>=L||u)&&g.a.createElement("div",{className:"homework-chat__item-bottom"},g.a.createElement("div",{className:"homework-chat__item-unread","data-id":t.id,onClick:e.handleEdit},"Редактировать")))))}(t)),t.date_format}}))}var W=p&&!A,D=d&&!W&&!A,K=d&&W,Q=!d||A;return g.a.createElement("div",{className:"homework-chat"},g.a.createElement("div",{className:"homework-chat__items",onScroll:this.handleScroll,ref:this.refItems},R.length>0&&R,0===R.length&&g.a.createElement("div",{className:"homework-chat__empty"},"Здесь будет выводиться история переписки")),g.a.createElement("div",{className:"homework-chat__commands"}),g.a.createElement("div",{className:"homework-chat__input"},D&&g.a.createElement("div",{className:"homework-chat__input-finish"},"Группа завершилась, ДЗ больше не принимаются"),K&&g.a.createElement("div",{className:"homework-chat__input-finish"},"Группа завершилась",v>0&&g.a.createElement(g.a.Fragment,null,", но вы можете продлить проверки",g.a.createElement("button",{className:"button button_red homework-chat__input-button",onClick:function(){e.setState({payModal:!0})}},"Проверить ДЗ"))),Q&&g.a.createElement(g.a.Fragment,null,l&&g.a.createElement("div",{className:"homework-chat-editing"},g.a.createElement("div",{className:"homework-chat-editing__space"}),g.a.createElement("div",{className:"homework-chat-editing__which"},g.a.createElement("p",{className:"homework-chat-editing__which-text",dangerouslySetInnerHTML:{__html:l.msg}})),g.a.createElement("div",{className:"homework-chat-editing__cancel",onClick:this.handleCancelEdit},g.a.createElement("button",{className:"homework-chat-editing__cancel-button ic ic-close-gray"}))),g.a.createElement("div",null,g.a.createElement("div",{className:"homework-chat__input-attach"},!1===E&&g.a.createElement("div",null,g.a.createElement("div",{className:"ic ic-attach homework-chat__input-attach-icon"}),g.a.createElement("input",{type:"file",className:"file-in-button js-avatar-file",accept:"*/*",onChange:this.handleFileChoose})),!1!==E&&g.a.createElement("div",{className:"homework-chat__input-attach-icon"},g.a.createElement(T.a,null))),g.a.createElement("div",{className:"homework-chat__input-input"},g.a.createElement(S.a,{disabled:P,maxRows:10,full:!0,style:{height:"47px"},inputRef:function(t){return e.input=t},placeholder:"Напишите сообщение",onChange:this.handleChange,onKeyDown:this.handleKeyDown})),g.a.createElement("div",{className:"homework-chat__input-send",onClick:this.handleSend},g.a.createElement("div",{className:"ic ic-send homework-chat__input-send-icon"}))),s.length>0&&g.a.createElement(X,{availableCommands:s,onCommandClick:this.handleCommandClick}))),N&&g.a.createElement(H.a,{className:{"homework-chat__modal":!0},onCloseClick:function(){e.setState({payModal:!1})}},g.a.createElement("form",{action:"/payments/invoice/".concat(w,"/"),method:"POST"},g.a.createElement("input",{hidden:!0,name:"user_course_id",defaultValue:c.id}),g.a.createElement("input",{hidden:!0,name:"hw_id",defaultValue:j}),g.a.createElement("input",{hidden:!0,name:"hw_date",defaultValue:y}),g.a.createElement("input",{hidden:!0,name:"csrfmiddlewaretoken",defaultValue:Object(C.a)()}),g.a.createElement("div",{className:"homework-chat__modal-title"},"Оплатите проверку ДЗ"),g.a.createElement("div",{className:"homework-chat__modal-text"},"Группа завершилась, но вы можете продлить проверки ДЗ ",z&&"текущей ступени"," за ",v," ₽"),g.a.createElement("div",{className:"homework-chat__modal-text"},"После оплаты проверки ДЗ по курсу «",_,"» будут доступны до ",x()(y,"YYYY-MM-DD").locale("ru").format("LL")),g.a.createElement("div",{className:"homework-chat__modal-button"},g.a.createElement("button",{type:"submit",className:"button button_md button_red"},"Оплатить ",v," ₽")))))}}]),n}(g.a.Component),Z.propTypes={disabled:_.a.bool},Z.defaultProps={disabled:!1,payModal:!1},V=Z))||V},QIFU:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),c=n.n(o),i=n("7W2i"),s=n.n(i),u=n("a1gu"),l=n.n(u),f=n("Nsbk"),m=n.n(f),d=n("q1tI"),h=n.n(d),p=n("TSYQ"),v=n.n(p),y=n("HRdk");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var w=function(e){s()(n,e);var t=g(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e,t=this.props,n=t.fullscreen,r=t.progress,a=t.inline,o=t.small,c=t.md,i=t.full,s=t.center,u=t.blockCenter;if(!1!==r)e=h.a.createElement(y.a,{progress:r,center:!0,showProgress:!1});else{var l=this.props.width,f={};l&&(f.width="".concat(l,"px"),f.height="".concat(l,"px")),e=h.a.createElement("div",{style:f,className:v()({"otus-loader":!0,"otus-loader_small":o,"otus-loader_md":c,"otus-loader_inline":a,"otus-loader_full":i,"otus-loader_absolute-center":s,"otus-loader_block-center":u})})}return n?h.a.createElement("div",{className:"otus-loader-fullscreen"},e):e}}]),n}(h.a.Component);w.defaultProps={progress:!1,small:!1,md:!1,full:!1,center:!1,blockCenter:!1}},Sj7Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),c=n.n(o),i=n("7W2i"),s=n.n(i),u=n("a1gu"),l=n.n(u),f=n("Nsbk"),m=n.n(f),d=n("q1tI"),h=n("17x9"),p=n.n(h);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var y=function(e){s()(n,e);var t=v(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"getChildContext",value:function(){return{app:this.props.app}}},{key:"render",value:function(){return this.props.children}}]),n}(d.Component);y.propTypes={app:p.a.object,children:p.a.node},y.childContextTypes={app:p.a.object}},XmJA:function(e,t,n){"use strict";var r=n("9oTK"),a=n.n(r);a.a.config({cancellation:!0,warnings:!1}),window.Promise=a.a;window.Promise},YtzK:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("MVZn"),a=n.n(r),o=n("lwsE"),c=n.n(o),i=n("W8MJ"),s=n.n(i),u=n("7W2i"),l=n.n(u),f=n("a1gu"),m=n.n(f),d=n("Nsbk"),h=n.n(d),p=n("q1tI"),v=n.n(p),y=n("17x9"),g=n.n(y),w=n("TSYQ"),_=n.n(w);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var k=function(e){l()(n,e);var t=b(n);function n(){var e;c()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleKeyDown=function(t){var n=e.props.close;"Escape"===t.key&&n&&e.handleClose()},e.handleClose=function(){var t=e.props.onCloseClick;"function"==typeof t&&t()},e}return s()(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.props.bodyPreventOverflow&&document.body.classList.toggle("overflow-hidden",!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),this.props.bodyPreventOverflow&&document.body.classList.toggle("overflow-hidden",!1)}},{key:"render",value:function(){var e=this.props,t=e.close,n=e.children,r=e.closeExternal,o=e.slim,c=e.full,i=e.className,s=e.isNew,u=_()(a()({"otus-modal":!0,"otus-modal_slim":o,"otus-modal_full":c,"otus-modal_new":s},i));return v.a.createElement("div",{className:"otus-modal-container"},v.a.createElement("div",{className:"otus-modal-wrapper otus-modal-wrapper_dark"},v.a.createElement("div",{className:u},n,t&&!s&&!r&&v.a.createElement("div",{className:"otus-modal__close ic ic-close",onClick:this.handleClose}),t&&!s&&r&&v.a.createElement("div",{className:"otus-modal__close otus-modal__close_external ic ic-close-gray",onClick:this.handleClose}),t&&s&&v.a.createElement("div",{className:"otus-modal__close otus-modal__close_new",onClick:this.handleClose}))))}}]),n}(v.a.Component);k.propTypes={slim:g.a.bool,closeExternal:g.a.bool,onCloseClick:g.a.func,isNew:g.a.bool},k.defaultProps={close:!0,closeExternal:!1,slim:!1,isNew:!1,bodyPreventOverflow:!1}},Z4rv:function(e,t,n){"use strict";n.r(t),n.d(t,"logger",(function(){return r}));var r={};n.r(r),n.d(r,"component",(function(){return y})),n.d(r,"store",(function(){return g})),n.d(r,"action",(function(){return w}));n("RIqP");var a=n("W8MJ"),o=n.n(a),c=n("lwsE"),i=n.n(c),s=n("UMpK"),u=n.n(s),l=n("3OWR"),f=n.n(l),m=n("vN+2"),d=n.n(m);var h=["debug","info","warn","error","log"];var p,v=((p=o()((function e(t){var n=this,r=t.prefix,a=void 0===r?"":r,o=t.prefixStyle,c=void 0===o?"color:inherit":o,s=t.logMethods,l=void 0===s?h:s;if(i()(this,e),!Array.isArray(l))throw new TypeError('"logMethods" must be of type "Array" in ClientClientLogger for prefix: '.concat(a));this.prefix=a,this.prefixStyle=c;var m=u()(l,(function(e,t){e[t]=n.logMethod.bind(n,t)}),{});f()(this,m)}))).prototype.logMethod=d.a,p);function y(e){e.logger=new v({prefix:"Component",prefixStyle:"color:orange"})}function g(e){e.logger=new v({prefix:"Store",prefixStyle:"color:brown"})}function w(e){e.logger=new v({prefix:"Action",prefixStyle:"color:green"})}},eIui:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n("RIqP"),a=n.n(r),o=n("lwsE"),c=n.n(o),i=n("W8MJ"),s=n.n(i),u=n("UMpK"),l=n.n(u),f=n("bNQv"),m=n.n(f),d=n("3OWR"),h=n.n(d),p=n("OFL0"),v=n.n(p),y=n("mwIZ"),g=n.n(y),w=n("ijCd"),_=n.n(w),b=n("noZS"),k=n.n(b),E=n("JZM8"),x=n.n(E),C=function(){function e(t){var n=this;c()(this,e),this.applyContextTypePlugins=function(e){m()(e,n.applyPluginForContextType)},this.applyPluginForContextType=function(e,t){if(!n.isContextTypeAllowed(t))throw new Error('Unrecognized context type "'.concat(t,'". Must be one of: "').concat(n.constructor.allowedContextTypes,'"'));var r=n["".concat(t,"Context")];n.applyPlugin(e,r)},this.createContexts(t.context),this.stores=this.createStores(t.stores),this.actions=t.actions,this.applyPlugins(t.plugins)}return s()(e,[{key:"serialize",value:function(){var e=this;return l()(this.stores,(function(t,n,r){var a=e.serializeStore(n);a&&(t[r]=a)}))}},{key:"deserialize",value:function(e){var t=this;m()(e,(function(e,n){var r=t.stores[n];r&&(r.deserialize?r.deserialize(e):h()(r,e))}))}},{key:"callAction",value:function(e,t){if(!v()(this.actions,e))throw new Error("Can't execute action \"".concat(e,"\": it's not registered"));return this.logAction(e,t),g()(this.actions,e).call(this.actionContext,t)}},{key:"logAction",value:function(e,t){var n,r=t?["with data:",t]:["without data"];(n=this.actionContext.logger).info.apply(n,a()(["Calling action %c".concat(e),"color:green"].concat(r)))}},{key:"applyPlugins",value:function(e){m()(e,this.applyContextTypePlugins)}},{key:"isContextTypeAllowed",value:function(e){return _()(this.constructor.allowedContextTypes,e)}},{key:"createStores",value:function(e){var t=this;return k()(e,(function(e){return new e(t.storeContext)}))}},{key:"createContexts",value:function(e){var t=this.callAction.bind(this),n=this;e=e||{},this.componentContext={callAction:t,get extra(){return e},get stores(){return n.stores}},this.actionContext={callAction:t,get stores(){return n.stores}},this.storeContext={get stores(){return n.stores}}}},{key:"applyPlugin",value:function(e,t){return e(t)}},{key:"serializeStore",value:function(e){var t=e.constructor.serializeKeys,n={};return t&&(n=x()(e,t)),e.serialize&&(n=e.serialize(n)),n}}]),e}();C.allowedContextTypes=["action","store","component","trackPage","trackEvent"]},igiR:function(e,t,n){"use strict";function r(){var e=document.getElementById("meta-csrf");return e?e.getAttribute("content"):""}n.d(t,"a",(function(){return r}))},jyKj:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"a",(function(){return d})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return v}));var r=n("bNQv"),a=n.n(r),o=n("wd/R"),c=n.n(o);function i(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function s(e,t,n,r){var a=e%10,o=e%100;return 1===a&&11!==o?t:a>=2&&a<=4&&(o<10||o>=20)?n:r}function u(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function l(e,t){return null===t?e="".concat(e,"(а)"):"f"===t&&(e="".concat(e,"а")),e}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.linkProcessor;return(e||"").replace(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+)[^(.(\s|$))])/gi,(function(e,t,r){var a=r;return a.match("^https?://")||(a="http://".concat(a)),"function"==typeof n&&(a=n(a)),t+'<a target="_blank" rel="nofollow noopener nofollow" href="'.concat(a,'">').concat(r,"</a>")}))}function m(e,t,n){var r="(".concat(t,")((.|[\n\r])+?)(").concat(t,")");return e.replace(new RegExp(r,"mgi"),(function(e,t,r){return n(r)}))}function d(e){var t=s(e,"байт","байта","байтов");return a()(["КБ","МБ","ГБ"],(function(n){e>1024&&(e/=1024,t=n)})),{value:e=e<10?Math.round(10*e)/10:Math.round(e),suffix:t}}function h(e,t){return null==e?"":(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function p(e,t,n){return[e,t].map((function(e){return!e||e instanceof c.a||(e=e instanceof Date?c()(e):void 0),e})),t&&e&&0!==t.diff(e,"days")?"".concat(e.format(n)," - ").concat(t.format(n)):t||e?"".concat((e||t).format(n)):void 0}function v(e,t){var n="";return e&&(n+=e.trim()),t&&(n&&(n+=" "),n+=t.trim()),n}},l1BO:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var r=n("MVZn"),a=n.n(r),o=n("bNQv"),c=n.n(o),i=n("vDqi"),s=n.n(i),u=n("igiR"),l=s.a.CancelToken;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.toLowerCase(),o=l.source();return n.cancelToken=o.token,new window.Promise((function(t,c,i){s()(a()({method:r,url:e},n)).then((function(e){200!==e.status?c(e):t(e.data||e)}),(function(e){return c(e)})),i((function(){o.cancel()}))}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(r.headers||(r.headers={}),a){if(!(n instanceof FormData)){var o=new FormData;c()(n,(function(e,t){void 0!==e&&o.append(t,e)})),n=o}Object.assign(r.headers,{"Content-Type":"multipart/form-data"})}return Object.assign(r.headers,{"X-CSRFToken":Object(u.a)(),"X-Requested-With":"XMLHttpRequest"}),"GET"===t&&(r.params=n),null!==r.data&&void 0!==r.data||"GET"===t||(r.data=n),f(e,t,r).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))}},mV8o:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n("pVnL"),a=n.n(r),o=n("lSNA"),c=n.n(o),i=n("QILm"),s=n.n(i),u=n("lwsE"),l=n.n(u),f=n("W8MJ"),m=n.n(f),d=n("7W2i"),h=n.n(d),p=n("a1gu"),v=n.n(p),y=n("Nsbk"),g=n.n(y),w=n("q1tI"),_=n.n(w),b=n("TSYQ"),k=n.n(b),E=n("O6Fj"),x=n.n(E),C=["full","inputRef","editor","customClassname"];function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var R=function(e){h()(n,e);var t=N(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){var n=e.props,r=n.onChange,a=n.maxLength;console.log(r),("function"!=typeof r||!a||t.target.value.length<=a)&&r(t.target.value)},e}return m()(n,[{key:"render",value:function(){var e=this.props,t=e.full,n=e.inputRef,r=e.editor,o=e.customClassname,i=s()(e,C);return n=n||function(){},_.a.createElement(x.a,a()({},i,{innerRef:n,className:k()("textarea",c()({input:!0,input_full:t,"js-editor":r},o,!0)),onChange:this.handleChange}))}}]),n}(_.a.Component);R.defaultProps={disabled:!1}},"pH2+":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),c=n.n(o),i=n("7W2i"),s=n.n(i),u=n("a1gu"),l=n.n(u),f=n("Nsbk"),m=n.n(f),d=n("q1tI"),h=n.n(d),p=n("jyKj");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var y=function(e){s()(n,e);var t=v(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.title;return h.a.createElement("div",{className:"for-teacher-message"},h.a.createElement("b",{className:"text text_small"},n||"Примечание для преподавателя"),h.a.createElement("div",{className:"text text_small",dangerouslySetInnerHTML:{__html:Object(p.g)(Object(p.b)(t))}}))}}]),n}(h.a.Component)},pOpv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),c=n.n(o),i=function(){function e(t){a()(this,e),this.app=t,this.init&&this.init()}return c()(e,[{key:"stores",get:function(){return this.app.stores}},{key:"logger",get:function(){return this.app.logger}},{key:"trackPage",get:function(){return this.app.trackPage}},{key:"trackEvent",get:function(){return this.app.trackEvent}},{key:"reset",value:function(){this.init&&this.init()}}]),e}()},x2Tk:function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=n("yXPU"),c=n.n(o),i=n("l1BO"),s="Произошла проблема при загрузке",u="file",l=function(){var e=c()(a.a.mark((function e(t,n){var r,o,c,l,f,m,d,h,p,v,y,g,w,_,b=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fileName,o=n.mediaType,c=n.isPrivate,l=n.withPreview,f=b.length>2&&void 0!==b[2]?b[2]:{},m=f.onUploadProgress,d=t.size,"text/plain"===(h=t.type)&&(h="text/plain; charset=utf-8"),e.next=7,Object(i.b)("/api/media.create","POST",{filename:r||t.name,private:c||!0,with_preview:l||!1,content_type:h,size:d,media_type:o||u});case 7:if(p=e.sent){e.next=10;break}throw s;case 10:return v=p.response.data,y=v.media,(g=v.upload_data).fields.file=t,e.next=14,Object(i.b)(g.url,"POST",g.fields,{onUploadProgress:m},!0);case 14:if(e.sent){e.next=17;break}throw s;case 17:return e.next=19,Object(i.b)("/api/media.confirm","POST",{media:y.id});case 19:if(w=e.sent){e.next=22;break}throw s;case 22:if("ok"!==(_=w.response).status){e.next=27;break}return e.abrupt("return",_.data);case 27:throw s;case 28:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.a=l}});